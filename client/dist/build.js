(()=>{"use strict";Vue.component("vue-header",{props:["search"],data:()=>({}),template:'<div>\n  \n  <header class="header container">\n   <input type="text" class="goods-search" v-model="search" />\n  <button class="search-button" type="button" \n  v-on:click="$emit(\'filter-goods\', search)">\n   Искать\n </button>\n  <button class="cart-button" type="button">Корзина</button> </header>\n  </div>'}),Vue.component("goods-list",{props:["goods"],template:'<div>\n  <h2 class="goods-list">Товары</h2>\n    <div class="goods-list">\n          <goods-item v-for="item in goods" :item="item"></goods-item>\n        </div></div>'}),Vue.component("goods-item",{props:["item"],template:'<div class="goods-item">\n    <h3>{{item.product_name}}</h3>\n    <p>{{item.price}}</p>\n    <button @click="response">\n      Добавить в корзину\n    </button>\n  </div> ',methods:{response(){fetch("/cartAdd.json",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.item)}),location.reload()}}}),Vue.component("basket-list",{props:["goods"],template:'\n  <div>\n  <h2 class="goods-list">Корзина</h2>\n  <div class="goods-list">\n  <basket-item v-for="item in goods" :item="item"></basket-item>\n  </div>\n  </div>'}),Vue.component("basket-item",{props:["item"],template:' <div class="goods-item" v-if="item.quantity!=0">\n  <h3>{{item.product_name}}</h3>\n  <p>{{item.price}}</p>\n  <p>Количество {{item.quantity}}</p>\n  <button @click="response">X</button>\n</div>\n  ',methods:{response(){fetch("/cartRemove.json",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(this.item)}),location.reload()}}}),new Vue({el:"#app",data:{goods:[],filteredGoods:[],searchLine:"Ноутбук",basket:{},trying:"ds"},methods:{answer:t=>fetch(t).then((t=>t.json()),(t=>{console.log(t)})),filter(t){this.searchLine=t,this.filteredGoods=this.goods,this.searchLine&&(this.filteredGoods=this.filteredGoods.filter((t=>t.product_name.toUpperCase()==this.searchLine.toUpperCase())))}},mounted(){this.answer("/catalog.json").then((t=>(this.goods=t,this.filteredGoods=t,this.goods)),(t=>{console.log(t)})),this.answer("/cart.json").then((t=>(this.basket=t,this.basket)),(t=>{console.log(t)}))}})})();